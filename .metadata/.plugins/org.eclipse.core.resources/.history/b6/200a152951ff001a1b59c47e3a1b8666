/* 
 * @author Ram Vegiraju
 * 09/17/2020
 * User class
 * */

/** 
 *
 *
 *
 *User
 *---------------
 * - userName: String
 * - memesCreated: ArrayList<Meme> 
 * - memesViewed: ArrayList<Meme>
 * ----------------
 * + getUserName(): String
 * + setUserName(userName: String): void
 * + getMemesCreated(): ArrayList<Meme>
 * + setMemesCreated(memesCreated: ArrayList<Meme>): void 
 * + getMemesViewed(): ArrayList<Meme>
 * + setMemesViewed(memesViewed: ArrayList<Meme>): void 
 * + rateMeme (Meme, rating: int): void
 * + createMeme(BackgroundImage, caption: String): null
 * + deleteMeme(Meme): boolean
 * + shareMeme(Meme, Feed): void
 * + rateNextMeme(Feed, ratingScore: int): void
 * + calculateReputation(): double
 * + toString(): String
 * + equals(Object): boolean
 * 
 * */


import java.util.ArrayList;

public class User {
	
	private String userName;
	private ArrayList<Meme> memesCreated;
	private ArrayList<Meme> memesViewed;
	
	//default constructor
	public User() {
		this.userName = "";
		this.memesCreated = new ArrayList<Meme>();
		this.memesViewed = new ArrayList<Meme>();
	}
	
	//test constructor with just a username
	public User(String userName) {
		this.userName = userName;
		this.memesCreated = null;
		this.memesViewed = null;
	}
	
	/*
	//constructor that takes in all arguments
	public User(String userName, ArrayList<Meme> memesCreated, ArrayList<Meme> memesViewed) {
		this.userName = userName;
		this.memesCreated = memesCreated;
		this.memesViewed = memesViewed;
	}*/

	/**
	 * @return the userName
	 */
	public String getUserName() {
		return userName;
	}

	/**
	 * @param userName the userName to set
	 */
	public void setUserName(String userName) {
		this.userName = userName;
	}

	/**
	 * @return the memesCreated
	 */
	public ArrayList<Meme> getMemesCreated() {
		return memesCreated;
	}

	/**
	 * @param memesCreated the memesCreated to set
	 */
	public void setMemesCreated(ArrayList<Meme> memesCreated) {
		this.memesCreated = memesCreated;
	}

	/**
	 * @return the memesViewed
	 */
	public ArrayList<Meme> getMemesViewed() {
		return memesViewed;
	}

	/**
	 * @param memesViewed the memesViewed to set
	 */
	public void setMemesViewed(ArrayList<Meme> memesViewed) {
		this.memesViewed = memesViewed;
	}
	
	//rateMeme method
	public void rateMeme(Meme tst, int rating) {
		/* STUB/TODO */
	}
	
	//createMeme method
	public Meme createMeme(BackgroundImage bi, String caption) {
		
		Meme meme = new Meme(bi, caption, this);
		memesCreated.add(meme);
		return meme;
	}
	
	//deleteMeme method
	public boolean deleteMeme(Meme del) {
		for(int i = 0; i < this.memesCreated.size(); i++) {
			if(this.memesCreated.get(i).equals(del)) {
				if(this.memesCreated.get(i).getShared() == true) {
					return false;
				}
				this.memesCreated.remove(i);
			}
		}
		return true;
	}
	
	//shareMeme method
	public void shareMeme(Meme sh, Feed fd) {
		if (sh.getShared() == false) {
			sh.setShared(true);
			fd.getMemes().add(sh);
		}
	}
	
	//rateNextMeme method
	public void rateNextMeme(Feed rnm, int rs) {
		/* STUB/TODO */
	}
	
	//calculateReputation method
	public double calculateReputation() {
		double sum = 0.0;
		if (memesCreated.isEmpty()) {
			return 0.0;
		}
		for (Meme meme: memesCreated) {
			sum = sum + meme.calculateRating();
		}
		return sum;
	}

	//toString method
	@Override
	public String toString() {
		return this.getUserName() + " has rated (" + memesViewed.size() + ") memes, (" + this.calculateReputation() + ")";
	}
	
	//equals method
	//@Override
	public boolean equals(Object obj) {
		if (obj == null) {
			return false;
		}
		if (obj instanceof User) {
			User user = (User) obj;
			boolean a = this.userName.equals(user.userName);
			if (a == true) {
				return true;
			}
		}
		return false;
	}
	
}

